CREATE DATABASE SHOPPINGCARTDB ;
USE SHOPPINGCARTDB
CREATE TABLE USERS (
USERID INT ,
USERNAME VARCHAR(50) ,
USERPASSWORD VARCHAR(10),
CONTACTNUMBER VARCHAR(10) ,
CITY VARCHAR(50),
)
ALTER TABLE USERS 
ALTER COLUMN USERID INT NOT NULL 
ALTER TABLE USERS 
ADD CONSTRAINT PK_USERID PRIMARY KEY (USERID)

SELECT * FROM USERS 


CREATE TABLE PRODUCTS (
PRODUCTID INT PRIMARY KEY ,
NAME VARCHAR(20) NOT NULL ,
QUANTITYINSTOCK INT NOT NULL CHECK (QUANTITYINSTOCK > 0) ,
UNITPRICE INT NOT NULL CHECK (UNITPRICE > 0),
CATEGORY VARCHAR(20) NOT NULL 
)
SELECT * FROM PRODUCTS 

CREATE TABLE CART (
ID INT PRIMARY KEY ,
CARTID INT NOT NULL ,
PRODUCTID INT ,
QUANTITY INT NOT NULL,
CONSTRAINT FK_CART_PRODUCTID FOREIGN KEY (PRODUCTID)
REFERENCES PRODUCTS (PRODUCTID)
ON DELETE CASCADE 
ON UPDATE CASCADE ,
CONSTRAINT CHECK_QUANTITY CHECK (QUANTITY > 0 )
)
SELECT * FROM CART 

CREATE TABLE ORDERS (
ORDERID INT PRIMARY KEY ,
CARTID INT ,
ORDERDATE DATE,
TOTALAMOUNT INT ,
USERID INT ,
CONSTRAINT FK_USERID FOREIGN KEY (USERID)
REFERENCES USERS (USERID)
ON DELETE CASCADE
ON UPDATE CASCADE ,
)

INSERT INTO USERS VALUES (1,'KAMAL','PASS1','1234567890','HYD')
INSERT INTO USERS VALUES (2,'KAMAL2','PASS2','2234567890','HYD2')
INSERT INTO USERS(USERID) VALUES (3)
UPDATE USERS SET USERNAME ='KAMAL3',USERPASSWORD = 'PASS3',CONTACTNUMBER='3234567890',CITY='HYD3' WHERE USERID = 3 ;

INSERT INTO ORDERS VALUES(2,1,'2001-03-29',50,3)
SELECT * FROM ORDERS
SELECT * FROM USERS

INSERT INTO Users VALUES
(4,'Kamalesh','kamalesh12','9767890987','CHENNAI'),
(5,'Wilson','wilson321','7397658910','CHENNAI'),
(6,'Ramesh','ramesh123','9876543213','DELHI')
;
INSERT INTO Products VALUES
(1,'Air Conditioner','300','29999','AC'),
(2,'Air Purifier','200','19999','Purifier'),
(3,'Air Purifier','200','19999','Purifier'),
(4,'Washing Machine','100','20999','Machine'),
(5,'Air Conditioner','100','20999','Machine'),
(6,'Hair Dryer','400','9999','Machine')
;
INSERT INTO PRODUCTS VALUES (7,'HAIRSHAMPOO','500','100','SHAMPOO'),
(9,'FRIDGE','200','10000','REFRIGIRATOR') ;
select * from products 

INSERT INTO Cart VALUES
(1,100,1,'10'),
(2,102,2,'10'),
(3,106,3,'10'),
(4,103,4,'10'),
(5,104,3,'10'),
(6,105,6,'10')
;
select * from cart 
select * from ORDERS
INSERT INTO Orders VALUES
(3,1,'2023-09-18','25000',3),
(4,3,'2023-09-18','27000',6),
(5,4,'2023-09-18','22000',1),
(6,5,'2023-09-18','23000',5)
;

SELECT * FROM CART
SELECT * FROM PRODUCTS
SELECT CARTID,NAME,QUANTITY,UNITPRICE FROM CART JOIN PRODUCTS ON CART.ID = PRODUCTS.PRODUCTID ; 

SELECT * FROM CART
SELECT * FROM PRODUCTS
SELECT * FROM CART INNER JOIN PRODUCTS ON CART.ID = PRODUCTS.PRODUCTID ;
SELECT * FROM CART RIGHT OUTER JOIN PRODUCTS ON CART.ID = PRODUCTS.PRODUCTID ;
SELECT * FROM CART LEFT OUTER JOIN PRODUCTS ON CART.ID = PRODUCTS.PRODUCTID ;
SELECT * FROM CART FULL OUTER JOIN PRODUCTS ON CART.ID = PRODUCTS.PRODUCTID ;

SELECT * FROM Products
SELECT * FROM Products
SELECT * FROM Products WHERE Category='AC'
SELECT * FROM Products WHERE QuantityInStock=0
SELECT * FROM Products WHERE UnitPrice>=1000 AND UnitPrice<=10000
SELECT * FROM Products WHERE ProductId=3

 

SELECT * FROM Cart WHERE CartId=3
SELECT * FROM Cart WHERE ProductId=3

 

SELECT * FROM Users
SELECT * FROM Users WHERE UserName='KAMALESH'
SELECT * FROM Users WHERE UserId=5

 

SELECT * FROM Orders WHERE OrderId=4;
SELECT * FROM Orders WHERE UserId=2;
SELECT * FROM Orders WHERE OrderDate='2023-09-18';


--ASSIGNMENT 2

CREATE TABLE Student(
	StudentId INT PRIMARY KEY,
	StudentName VARCHAR(20),
	CourseName VARCHAR(20),
	CityName VARCHAR(20),
	ContactNumber BIGINT
);

INSERT INTO Student VALUES(1,'KAMAL','Angular','Adilabad',9215374836);
INSERT INTO Student VALUES(2,'KAML2','.Net','Hyderabad',73256874315);
INSERT INTO Student VALUES(3,'KAMAL3','SQL','Adilabad',48739592834);
INSERT INTO Student VALUES(4,'KAMAL4','Angular','Hyderabad',9837594352);
INSERT INTO Student VALUES(5,'KAMAL5','JS','Nizambad',3284756452);


SELECT * FROM Student

SELECT COUNT(*) as Angular_Students_Count from Student group by CourseName having CourseName='Angular'

SELECT COUNT(*) as Hyd_Students_Count from Student group by CityName having CityName='Hyderabad'

SELECT COUNT(*) as Students_Count,CityName from Student group by CityName 

SELECT COUNT(*) as Students_Count,CourseName from Student group by CourseName

SELECT COUNT(*) as Students_Count,CourseName from Student group by CourseName

SELECT COUNT(*) as Students_Count,CourseName,CityName from Student group by CourseName,CityName

-----------------------------------------


Select count(*) as Orders_Placed from Orders where UserId IN (sELECT UserId FROM Users Where City='Hyd')

UPDATE USERS set City='Mum' where UserId=3

Select count(*) as Orders_Placed from Orders where UserId NOT IN (sELECT UserId FROM Users Where City='Hyd')

Select * from Products where ProductId IN (Select ProductId from Cart) 